<!DOCTYPE html><html lang="en" ><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Trend Detection Problem and Statistical Tests in Real Time" /><meta name="author" content="Pavan Donthireddy" /><meta property="og:locale" content="en_US" /><meta name="description" content="This article discusses the trend detection problem in statistical analysis and the various statistical tests used for detecting trends in real time. The article also covers the implementation of each test in Python with examples." /><meta property="og:description" content="This article discusses the trend detection problem in statistical analysis and the various statistical tests used for detecting trends in real time. The article also covers the implementation of each test in Python with examples." /><link rel="canonical" href="http://localhost:4000/2023/04/06/trend-detection" /><meta property="og:url" content="http://localhost:4000/2023/04/06/trend-detection" /><meta property="og:site_name" content="Pavan Donthireddy" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-04-06T00:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Trend Detection Problem and Statistical Tests in Real Time" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@Pavan Donthireddy" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Pavan Donthireddy"},"dateModified":"2023-04-06T00:00:00+01:00","datePublished":"2023-04-06T00:00:00+01:00","description":"This article discusses the trend detection problem in statistical analysis and the various statistical tests used for detecting trends in real time. The article also covers the implementation of each test in Python with examples.","headline":"Trend Detection Problem and Statistical Tests in Real Time","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2023/04/06/trend-detection"},"url":"http://localhost:4000/2023/04/06/trend-detection"}</script><title> Trend Detection Problem and Statistical Tests in Real Time - Pavan Donthireddy</title><meta charset="UTF-8"><link rel="canonical" href="http://localhost:4000/2023/04/06/trend-detection" /><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="IntroductionMany studies in finance, economics, climate studies, and stock markets focus on detecting trends in datasets. detecting trends can be hard becaus..."><meta property="og:site_name" content="Pavan Donthireddy"><meta property="og:description" content="IntroductionMany studies in finance, economics, climate studies, and stock markets focus on detecting trends in datasets. detecting trends can be hard becaus..."/><meta property="og:title" content="Trend Detection Problem and Statistical Tests in Real Time"><meta property="og:type" content="article"><meta property="article:published_time" content="2023-04-06T00:00:00+01:00"><meta property="article:author" content="http://localhost:4000/"><meta property="og:url" content="http://localhost:4000/2023/04/06/trend-detection" /><link rel="shortcut icon" href="/favicon.png"><link rel="alternate" type="application/atom+xml" title="Pavan Donthireddy" href="/atom.xml"><link rel="alternate" type="application/json" title="Pavan Donthireddy" href="http://localhost:4000/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ jax: ["input/TeX","input/MathML","output/SVG", "output/CommonHTML"], extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "CHTML-preview.js"], TeX: { extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"] }, tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true, processEnvironments: true, skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'] }, messageStyle: "none", "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }, TeX: { equationNumbers: { autoNumber: "AMS" }, extensions: ["AMSmath.js", "AMSsymbols.js","AMScd.js"], TagSide: "left", Macros: { field: ['\\mathbb{#1}', 1], C: ['\\field{C}'], E: ['\\field{E}'], F: ['\\field{F}'], N: ['\\field{N}'], P: ['\\field{P}'], Q: ['\\field{Q}'], R: ['\\field{R}'], Z: ['\\field{Z}'], ha : ['\\hat{#1}',1], Re: ['\\mathop{\\mathrm{Re}}'], Im: ['\\mathop{\\mathrm{Im}}'], Res: ['\\mathop{\\mathrm{Res}}'], } } }); </script> <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML-full"></script><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}body{font-family:system-ui,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.5;font-size:1rem;color:#16171a}nav ul{border-right:1px solid #edf2f7}a{color:#000;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:1rem 0}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0}.meta{margin:2rem 0}code,pre{background:#ecedee}code{padding:.1rem}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%}hr{background:#000;height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem}blockquote{font-style:italic;border-left:5px solid #ececec;padding-left:1rem}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:.5rem}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}main{display:flex;flex-wrap:wrap;max-width:60rem;margin:2rem auto;padding:1rem}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:.5rem}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}figcaption{font-size:smaller}.post-archive{font-size:15px;line-height:2;padding-bottom:.8em}.post-archive .date{padding-right:.7em}.pagination{width:100%;padding:0 20px;text-align:center}.pagination ul{list-style:none}.pagination ul li{display:inline;margin:0 5px}.pagination ul li a{color:#000;text-decoration:none}.pagination ul li a:hover{color:gray;text-decoration:underline}.pagination ul li.current-page a{background:#ddd;color:#fff}.post-link{position:relative;display:inline-block}.post-excerpt{display:none;position:absolute;z-index:1;top:100%;left:0;width:100%;padding:10px;background-color:#fff;box-shadow:0 2px 5px rgba(0,0,0,.1)}.post-link:hover .post-excerpt{display:block}.img-padding{width:200px;height:200px;padding:20px 20px 20px 20px}</style></head><body><main role="main"><header role="banner"> <!--<h1 class="logo">Pavan Donthireddy</h1>--><nav role="navigation"><ul><li><a href="/" >Notes</a></li><li><a href="/tags" >Tags</a></li><li><a href="/search" >Search</a></li><li><a href="/about" >About</a></li></ul></nav></header><link rel="stylesheet" href="/assets/js/prism.css"><link rel="stylesheet" href="/assets/js/prism-line-numbers.css"><section class="post"> <script src="/assets/js/prism.js"></script> <script src="/assets/js/prism-line-numbers.js"></script><h1 style="text-align: center;">Trend Detection Problem and Statistical Tests in Real Time</h1><div style="text-align: center;"><span class="meta"><time datetime="2023-04-06T00:00:00+01:00">April 6, 2023</time> </span></div><div style="text-align: center;"><span class="meta"> <a href="/tag/signal_detection">signal_detection</a>, <a href="/tag/trend_detection">trend_detection</a></span></div><h2 id="introduction">Introduction</h2><p>Many studies in finance, economics, climate studies, and stock markets focus on detecting trends in datasets. detecting trends can be hard because of the following reasons;</p><ul><li>Data comes from various fields of study and there are no straight forward solutions for detecting trends.</li><li>Tren detection in time-series data involves a computational challenge arising from Big data trend detection for implementation in real-time.</li><li>Some datasets may have multiple trends and detecting them requires an automated approach.</li></ul><p>This article provides insight on the trend detection problem and the various statistical tests for detecting trends in real-time. The tests are applied in Python and datasets from finance, econometrics, and meteorology are used as examples.</p><h2 id="trend-detection-problem">Trend Detection Problem</h2><p>The trend detection problem arises when looking for temporal pattern changes in a time-series data. A trend is the general direction of change in a sample over time. The trend is a vital component when forecasting the future values of a time-series dataset. There are three main types of trends.</p><h3 id="upward-trend">Upward trend</h3><p>An upward trend is when the data points show a consistent increase over time.</p><h3 id="downward-trend">Downward trend</h3><p>A downward trend is when the data points show a consistent decline over time.</p><h3 id="no-trend">No Trend</h3><p>No trend refers to the time-series data with no clear up or downward indication.</p><h2 id="statistical-tests-for-trend-detection">Statistical tests for Trend Detection</h2><p>Various statistical tests are used to detect trends based on their advantages, the type of data, their purpose, and limitations. Some of the tests discussed include;</p><h3 id="the-mann-kendall-test">The Mann-Kendall test</h3><p>The Mann-Kendall test is a nonparametric statistical test used to examine trends in stochastic variables. The test requires no hypothesis on the distribution of stochastic variables. The advantage of this method is that it can be used in any type of dataset, including those with outliers. As the implementation of the method uses ranked data, it is insensitive to monotonic transformation.</p><p>The Mann-Kendall test statistic (MK) is expressed as;</p><p><img src="https://latex.codecogs.com/png.image?\dpi{300}&space;\bg_white&space;\small&space;\large&space;\begin{aligned}&space;S&space;=&space;\sum_{i=1}^{N-1}\sum_{j=i&plus;1}^N&space;\mathrm{sign}(x_j-x_i)\\&space;&amp;MK&space;=&space;\frac{S}{\sqrt{\sum_{j=1}^{N-1}t_j}}\\&space;&amp;t_j&space;=&space;\frac{N-j&plus;1}{j},&space;j&space;=&space;1,2,&space;...&amp;,N-1&space;\end{aligned}" alt="Mann-Kendall test formulae" /></p><p>where xi, xj are the time-series data and N is the length of the data.</p><h3 id="modified-mann-kendall-test">Modified Mann-Kendall test</h3><p>Modified Mann-Kendall test is a variance stabilizing procedure that uses a log transformation to stabilize the variances in the Mann-Kendall test. The modified Mann-Kendall test overcomes the traditional Mann-Kendall test’s sensitivity to handling heteroscedasticity. The method’s strength is that it models the variance of the test statistic from the variance of the dataset. The test statistic is expressed as;</p><p><img src="https://latex.codecogs.com/png.image?\dpi{150}&space;\bg_white&space;Z_{MK}&space;=&space;\frac{S}{\sqrt{Var(S)}}" alt="Modified Mann-Kendall test formulae" /></p><p>where Var(S) is the variance estimator of S.</p><h3 id="bayesian-trend-analysis">Bayesian trend analysis</h3><p>Bayesian trend analysis tests if the time-series data shows a significant trend. The model considers the magnitude of the trend and estimates with uncertainty intervals. The test’s advantage is that it allows data to be informative and generates output in credible intervals. Suppose x represents the observed data, e the error term, g(x) the trend function, then the model for Bayesian trend analysis is;</p><table><tbody><tr><td>![Bayesian trend analysis formulae](https://latex.codecogs.com/png.image?\dpi{300}&amp;space;\bg_white&amp;space;\large&amp;space;\mathrm{P}(g(x)</td><td>x)\varpropto&amp;space;\mathrm{P}(x</td><td>g(x))\mathrm{P}(g(x))))</td></tr></tbody></table><h3 id="sens-slope-estimator">Sens slope estimator</h3><p>This method of trend detection involves ranking the data from a time-series dataset over time to calculate the Kendall rank correlation coefficient. The slope estimator function is defined as;</p><p><img src="https://latex.codecogs.com/png.image?\dpi{300}&space;\bg_white&space;\tiny&space;\begin{aligned}&space;z_j&space;=&space;\frac{\mathop{\sum}_ {i=1}^j&space;(x_i&space;-&space;x_{j&plus;1})}{j},&space;j=1,2,&space;...&amp;,N-1\\&space;b&space;=&space;(z_1&space;&plus;&space;z_2&space;&plus;...&plus;z_{N-1})\\&space;d&space;=&space;\frac{6}{N(N-1)(N1)}\times\mathop{\sum}_{j=1}^{N-1}\mathop{\sum}_{i=j&plus;1}^N(z_j&space;-&space;z_i)^2&space;\end{aligned}" alt="Sens slope estimator formulae" /></p><p>where xi represents sorted data and N is the sample size.</p><h2 id="implementation-in-python">Implementation in Python</h2><p>Python provides a toolkit for performing trend detection tests. The following Python libraries can be used for trend detection:</p><ul><li><p><code class="language-plaintext highlighter-rouge">pandas</code>: This library offers fundamental data structures for managing time-series data.</p></li><li><p><code class="language-plaintext highlighter-rouge">numpy</code>: This library offers a scalable multidimensional array and matrices with mathematical functions for computing and operating on them.</p></li><li><p><code class="language-plaintext highlighter-rouge">scipy</code>: This library offers scientific and technical computing modules about statistics, signal processing, optimization, and linear algebra.</p></li><li><p><code class="language-plaintext highlighter-rouge">statsmodels</code>: This library offers statistical models and functional data analysis tools for data analysis.</p></li></ul><h3 id="mann-kendall-test-in-python">Mann-Kendall test in Python</h3><h4 id="example">Example</h4><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">from</span> <span class="n">scipy.stats</span> <span class="kn">import</span> <span class="n">norm</span>

<span class="k">def</span> <span class="nf">trend_test</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
            <span class="n">s</span><span class="o">+=</span>  <span class="n">np</span><span class="p">.</span><span class="nf">sign</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">-</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">var_s</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">+</span><span class="mi">5</span><span class="p">))</span><span class="o">/</span><span class="mi">18</span>
    <span class="k">if</span> <span class="n">s</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">z</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">var_s</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="n">s</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">z</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">var_s</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">norm</span><span class="p">.</span><span class="nf">cdf</span><span class="p">(</span><span class="nf">abs</span><span class="p">(</span><span class="n">z</span><span class="p">)))</span>
    <span class="n">r</span> <span class="o">=</span> <span class="p">{</span><span class="s">'z'</span><span class="p">:</span><span class="n">z</span><span class="p">,</span><span class="s">'p'</span><span class="p">:</span><span class="n">p</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="s">'data.csv'</span><span class="p">)</span>
<span class="n">data_trend</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'Data'</span><span class="p">].</span><span class="n">values</span>
<span class="n">trend_results</span> <span class="o">=</span> <span class="nf">trend_test</span><span class="p">(</span><span class="n">data_trend</span> <span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">trend_results</span> <span class="p">)</span>
</code></pre></div></div><h3 id="modified-mann-kendall-trend-test-in-python">Modified Mann-Kendall trend test in Python</h3><h4 id="example-1">Example</h4><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="k">def</span> <span class="nf">modified_mk_test</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
            <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="p">.</span><span class="nf">sign</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">k</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="n">variance_s</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">5</span><span class="p">))</span> <span class="o">/</span> <span class="mf">18.0</span>
    <span class="n">zmk</span> <span class="o">=</span> <span class="n">k</span> <span class="o">/</span> <span class="n">np</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">variance_s</span><span class="p">)</span>

    <span class="c1"># calculating the term b
</span>    <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="n">s</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span> <span class="o">/</span> <span class="mf">18.0</span>
    <span class="k">if</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">senQ</span> <span class="o">=</span> <span class="p">((</span><span class="n">b</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">senQ</span> <span class="o">=</span> <span class="p">((</span><span class="n">b</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>

    <span class="nf">return </span><span class="p">(</span><span class="n">zmk</span><span class="p">,</span> <span class="n">senQ</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="s">'data.csv'</span><span class="p">)</span>
<span class="n">data_trend</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'Data'</span><span class="p">].</span><span class="n">values</span>
<span class="n">trend_results</span> <span class="o">=</span> <span class="nf">modified_mk_test</span><span class="p">(</span><span class="n">data_trend</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">trend_results</span> <span class="p">)</span>
</code></pre></div></div><h3 id="bayesian-trend-analysis--in-python-with-pymc3">Bayesian trend analysis in Python with <code class="language-plaintext highlighter-rouge">pymc3</code></h3><h4 id="example-2">Example</h4><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pymc3</span> <span class="k">as</span> <span class="n">pm</span>

<span class="k">def</span> <span class="nf">bayesian_trend_analysis</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">pm</span><span class="p">.</span><span class="nc">Model</span><span class="p">()</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="n">pm</span><span class="p">.</span><span class="nc">Normal</span><span class="p">(</span><span class="s">'alpha'</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sd</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">beta</span> <span class="o">=</span> <span class="n">pm</span><span class="p">.</span><span class="nc">Normal</span><span class="p">(</span><span class="s">'beta'</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sd</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">sigma</span> <span class="o">=</span> <span class="n">pm</span><span class="p">.</span><span class="nc">HalfNormal</span><span class="p">(</span><span class="s">'sigma'</span><span class="p">,</span> <span class="n">sd</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">mu</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">+</span> <span class="n">beta</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="n">obs</span> <span class="o">=</span> <span class="n">pm</span><span class="p">.</span><span class="nc">Normal</span><span class="p">(</span><span class="s">'obs'</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="n">mu</span><span class="p">,</span> <span class="n">sd</span><span class="o">=</span><span class="n">sigma</span><span class="p">,</span> <span class="n">observed</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="n">pm</span><span class="p">.</span><span class="nf">sample</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
        <span class="n">pm</span><span class="p">.</span><span class="nf">summary</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>
    <span class="k">return</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="s">'data.csv'</span><span class="p">)</span>
<span class="n">data_trend</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'Data'</span><span class="p">].</span><span class="n">values</span>
<span class="nf">bayesian_trend_analysis</span><span class="p">(</span><span class="n">data_trend</span> <span class="p">)</span>
</code></pre></div></div><h3 id="sens-slope-estimator-in-python">Sens slope estimator in Python</h3><h4 id="example-3">Example</h4><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="k">def</span> <span class="nf">sens_slope_estimator</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">N</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="nf">sum</span><span class="p">(</span><span class="n">data</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="nf">sum</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="mi">6</span><span class="o">/</span><span class="p">(</span><span class="n">N</span><span class="o">*</span><span class="p">(</span><span class="n">N</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span><span class="o">*</span><span class="nf">sum</span><span class="p">([(</span><span class="n">z</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">-</span><span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)])</span>
    <span class="n">tau_b</span> <span class="o">=</span> <span class="n">b</span> <span class="o">/</span> <span class="n">np</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tau_b</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="s">'data.csv'</span><span class="p">)</span>
<span class="n">data_trend</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'Data'</span><span class="p">].</span><span class="n">values</span>
<span class="n">sens_slope</span> <span class="o">=</span> <span class="nf">sens_slope_estimator</span><span class="p">(</span><span class="n">data_trend</span> <span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">sens_slope</span> <span class="p">)</span>
</code></pre></div></div><h2 id="conclusion">Conclusion</h2><p>This article discussed the trend detection problem, the various statistical tests used in real-time trend detection, their advantages, and disadvantages. The tests were implemented in Python with datasets from finance, econometrics, and meteorology used as examples. These tests will be useful for quickly detecting trends and forecasting future values of time-series data samples. Further research can focus on optimization techniques to reduce data, improve accuracy, and increase the computational speed for large datasets.</p><hr> <side style="font-size: 0.9em"><h3 style="margin-bottom: 1em">Notes mentioning this note</h3><div style="font-size: 0.9em"><p> There are no notes linking to this note.</p></div></side> <a href="" class="post-link"><h2></h2><p class="post-excerpt"></p></a> <script src="https://giscus.app/client.js" data-repo="pavandonthireddy/pavandonthireddy.github.io" data-repo-id="[ENTER REPO ID HERE]" data-category="[ENTER CATEGORY NAME HERE]" data-category-id="[ENTER CATEGORY ID HERE]" data-mapping="url" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="light_high_contrast" data-lang="en" data-loading="lazy" crossorigin="anonymous" async> </script></section></main><div class="center"> <a href='https://ko-fi.com/G2G3KNTHM' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://storage.ko-fi.com/cdn/kofi5.png?v=3' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a></div></body></html>
